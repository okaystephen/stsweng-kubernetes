<tr>
    <td>
        <small>{{hp_name}}</small>
    </td>
    <td style="font-size:small;">
        <small>{{this.hp_desc}}</small>
    </td>
    <td class="text-center">
        <small>{{dateFormat this.hp_startdate "YYYY-MM-DD"}}</small>
        <br>
        <small>{{dateFormat this.hp_startdate "h:mm a"}}</small>
    </td>
    <td class="text-center">
        <small>{{dateFormat this.hp_enddate "YYYY-MM-DD"}}</small>
        <br>
        <small>{{dateFormat this.hp_enddate "h:mm a"}}</small>
    </td>
    <td class="text-center">
        <small>{{this.hp_location}}</small>
    </td>
    <td class="text-center">
        <small
            style="color: {{#equals hp_curCap hp_maxCap}}red{{else}}#2F8250{{/equals}};">{{this.hp_curCap}}/{{this.hp_maxCap}}</small>
    </td>
    <td class="text-center">
        {{#equals hp_curCap hp_maxCap}}
        {{!-- <span tabindex="0" data-toggle="tooltip" data-placement="right" title="You already sent your response to this applicant"></span>
        <small><button class="btn btn-secondary" role="button" style="pointer-events: none;" disabled>Register</button></small> --}}
        <span class="d-inline-block" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="{{hp_name}} has already reached the maximum number of patients">
            <button class="btn btn-secondary" style="pointer-events: none;" type="button" disabled>Register</button>
        </span>
        {{else}}
            {{#if user_active}}
                <small><a class="btn btn-success" role="button" data-toggle="modal" data-target="#a{{_id}}">Register</a></small>
            {{else}}
                <small><a class="btn btn-success" role="button" onclick="register()">Register</a></small>
            {{/if}}
        {{!-- <small><a class="btn btn-success" role="button" onclick="{{#if ../user_active}}register_user('{{this.hp_name}}'){{else}}register(){{/if}}">Register</a></small> --}}
        {{/equals}}
    </td>
</tr>

{{!-- Register Health Program Modal --}}
<div class="modal fade" id="a{{_id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLongTitle">{{hp_name}}</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <form id="registerHealth" method="post" action="/registerhealth">
                
                <div>
                    <div class="col-12" >
                        <label for="streetAdd" style="margin-left: -170px; font-weight:bolder; font-size: 15px">Reason for joining the program<span class="text-danger"> *</span></label>
                        <textarea class="form-control" id="homeAdd" name="homeAdd"
                            aria-describedby="homeAdd" placeholder=""
                            value="{{user.address}}"></textarea>
                    </div>
                    <div class="col-sm-10" style="font-size: smaller; color: red"></div>
                </div>

                <div style="margin-top: 15px; margin-bottom: 10px">
                    <div class="col-12" >
                        <label for="streetAdd" style="margin-left: -100px; font-weight:bolder; font-size: 15px">When is the last time you went outside?<span class="text-danger"> *</span></label>
                        <input type="date" class="form-control" id="homeAdd" name="homeAdd"
                            aria-describedby="homeAdd" placeholder=""
                            value="{{user.address}}"/>
                    </div>
                    <div class="col-sm-10" style="font-size: smaller; color: red"></div>
                </div>
          </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Register</button>
      </div>
    </div>
  </div>
</div>


<script>
    //function register_user(hp_name) {
        //var hp_confirm = confirm("Do you want to register in the following program: " + hp_name);
        //if (hp_confirm == true) {
            //$.ajax({
            //    url: "/healthprograms-reserve/",
            //    data: { id: self },
            //    success: function (response) {
            //        alert("Successfully reserved! Please check your dashboard.")
            //    },
            //    error: function (xhr) { }
            //});
        //}
    //}
    function register() {
        alert("Please log in first!");
        $("#login-nav1").addClass("show");
        $("#navbarDropdownMenuLink").attr("aria-expanded", "true");
        $("#login-nav2").addClass("show");
    }
</script>