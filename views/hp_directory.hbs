<style>
    th {
        color: #2F8250 !important;
    }
</style>


<body style="background-color: rgb(243, 243, 243); margin: 0; font-family: 'Roboto Mono';">
    <!-- Navigation Bar -->
    <!-- Sticky Vertical Navigation Bar -->
    <ul class="vertical-navbar">
        <li>
            <p class="h1 shrink gradient-text"
                style="text-align: center; margin-left: 8px; margin-top: .5rem; font-family: 'Montserrat', sans-serif;">
                DoloMed <i class="far fa-hospital"></i></p>
        </li>
        <hr>
        <li><a href="/profile" style="font-size: medium;">Dashboard</a></li>
        <li>
            <a href="/healthprograms" style="font-size: medium;">Health Programs</a>
        </li>
        <li><a href="/doctors" style="font-size: medium;">Doctors</a></li>
        <li><a href="/appointments" style="font-size: medium;">Appointments</a></li>
    </ul>

    <!-- Sticky Horizontal Navigation Bar -->
    <nav class="navbar navbar-expand-lg sticky-top navbar-dark"
        style="height: 72px; padding-top: 1rem; margin-left: 20%;">
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item">
                <h6 style="font-family: 'Roboto Mono';">{{user.name.last}}, {{user.name.first}} {{user.name.middle}}
                </h6>
            </li>
        </ul>
        <ul class="navbar-nav ml-auto mt-2 mt-lg-0" style="list-style-type: none;">
            <li class="nav-item dropdown {{#if login_active}}show{{/if}}">
                <a class="nav-link dropdown-toggle caret-off" href="#" id="navbarDropdownMenuLink"
                    data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="{{#if login_active}}true{{else}}false{{/if}}">
                    <h6>Settings</h6>
                </a>
                <div class="dropdown-menu dropdown-menu-right p-4 {{#if login_active}}show{{/if}}"
                    aria-labelledby="navbarDropdownMenuLink">
                    <div class="container-fluid m-auto text-center p-auto">
                        <form method="POST">
                            <div class="text-center px-3">
                                <h6><a href="/account" style="color:#2F8250;">Account</a></h6>
                                <hr>
                                <h6><a href="/logout" style="color:#2F8250;">Log Out</a></h6>
                            </div>
                        </form>
                    </div>
                </div>
            </li>
        </ul>
    </nav>

    <!-- End of Navigation Bar -->
    <div class="profile-content" style="min-height: 700px;">
            <div class="row">
                <div class="col">
                    <p class="h1" style="color: #2F8250 ; font-family: 'Montserrat', sans-serif; font-size:13vh;">Health
                        Programs</p>
                    <div class="card ">
                        <div class="card-body" style="color: #5C6B6B ; font-family: 'Montserrat', sans-serif;">
                            <div class="table-responsive text-center">
                                <table class="table text-left blog-project-table" id="hp-table">
                                    <thead class=" text-primary">
                                        <th style="width:20%">
                                            Name
                                        </th>
                                        <th style="width:30%">
                                            Description
                                        </th>
                                        <th class="text-center" style="width:15%">
                                            Start Date
                                        </th>
                                        <th class="text-center" style="width:15%">
                                            End Date
                                        </th>
                                        <th class="text-center" style="width:15%">
                                            Location
                                        </th>
                                        <th class="text-center" style="width:5%">
                                            Cap
                                        </th>
                                        <th class="text-center" style="width:5%">

                                        </th>
                                    </thead>
                                    <tbody id="entries-table">
                                        {{#each healthprogramsContent}}
                                        <tr>
                                            <td>
                                                <small>{{this.hp_name}}</small>
                                            </td>
                                            <td style="font-size:small;">
                                                <small>{{this.hp_desc}}</small>
                                            </td>
                                            <td class="text-center">
                                                <small>{{dateFormat this.hp_startdate "YYYY-MM-DD"}}</small>
                                                <br>
                                                <small>{{dateFormat this.hp_startdate "h:mm a"}}</small>
                                            </td>
                                            <td class="text-center">
                                                <small>{{dateFormat this.hp_enddate "YYYY-MM-DD"}}</small>
                                                <br>
                                                <small>{{dateFormat this.hp_enddate "h:mm a"}}</small>
                                            </td>
                                            <td class="text-center">
                                                <small>{{this.hp_location}}</small>
                                            </td>
                                            <td class="text-center">
                                                <small
                                                    style="color: {{#equals hp_curCap hp_maxCap}}red{{else}}#2F8250{{/equals}};">{{this.hp_curCap}}/{{this.hp_maxCap}}</small>
                                            </td>
                                            <td class="text-center">
                                                {{#equals hp_curCap hp_maxCap}}<small><button class="btn btn-secondary" href="#"
                                                        role="button" style="cursor:not-allowed"
                                                        disabled>Register</button></small>{{else}}<small><a
                                                        class="btn btn-success" role="button"
                                                        onclick="{{#if ../user_active}}register_user('{{this.hp_name}}'){{else}}register(){{/if}}">Register</a></small>{{/equals}}
                                            </td>
                                        </tr>
                                        {{/each}}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <script>
        // Health Programs Table Sort
        $(document).ready(function () {
            $('#hp-table').DataTable({
                "aaSorting": [],
                columnDefs: [{
                    orderable: false,
                    targets: [1, 6]
                }]
            })
        });

        function register_user(hp_name) {
            var hp_confirm = confirm("Do you want to register in the following program: " + hp_name);

            if (hp_confirm == true) {
                //$.ajax({
                //    url: "/healthprograms-reserve/",
                //    data: { id: self },
                //    success: function (response) {
                //        alert("Successfully reserved! Please check your dashboard.")
                //    },
                //    error: function (xhr) { }
                //});

                alert("Successfully reserved! Please check your dashboard.")
            }
        }

        function register() {
            alert("Please log in first!");
        }
    </script>
</body>